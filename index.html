<!DOCTYPE html>
{% autoescape true %}
<html>
<!-- [START head_html] -->
<head>
  <title>Mixed Content Test Site</title>
  <link type="text/css" rel="stylesheet" href="/static/main.css" />
  <script>
    function resetURL(age) {
      window.location.href = "//{{ host }}/";
    }
    function setHSTSMaxAge(age) {
      window.location.href = "?hsts-max-age=" + age;
    }
    function loadPage(protocol) {
      var url = protocol + "://{{ host }}/";
      window.location.href = url;
    }
    function changeImage(protocol) {
      var url = protocol + "://{{ host }}/static/image.jpg";
      document.getElementById('img').src = url;

      document.getElementById('img').classList.remove("http");
      document.getElementById('img').classList.remove("https");
      document.getElementById('img').classList.add(protocol);
    }
    function addScript(protocol) {
      var url = protocol + "://{{ host }}/dynamic/script.js";
      var scriptElement = document.createElement("script");
      scriptElement.src = url;

      document.getElementById("messages").innerHTML += "<br><span class='" + protocol + "-light'>Trying to load script. [Protocol: " + protocol + "]</span>";
      document.body.appendChild(scriptElement);
    }
  </script>
</head>
<!-- [END head_html] -->
<body class="{{ protocol }}">

<div class="section">

  Mixed Content Test Site


  <br><br>

  <button onclick="loadPage('http')" class="http">HTTP Page</button>
  <button onclick="loadPage('https')" class="https">HTTPS Page</button>

</div>
<div class="section">

  <button onclick="changeImage('http')" class="http">HTTP Image</button>
  <button onclick="changeImage('https')" class="https">HTTPS Image</button><br><br>
  <img src="" id="img" alt="Test Image (this is the alt text).">

</div>
<div class="section">

  <button onclick="addScript('http')" class="http">HTTP Script</button>
  <button onclick="addScript('https')" class="https">HTTPS Script</button>

</div><div class="section" id="messages">Script Messages go here:<br></div>
<div class="section">
  {{ hsts_message }}<br><div>{{ hsts_message_extra }}</div><br>
  <button onclick="setHSTSMaxAge(0)">max-age=0</button>
  <button onclick="setHSTSMaxAge(60)">max-age=60</button>
  <button onclick="setHSTSMaxAge(10886400)">max-age=10886400</button>
  <button onclick="resetURL()">Reset URL</button>
</div>

</body>
</html>
{% endautoescape %}
